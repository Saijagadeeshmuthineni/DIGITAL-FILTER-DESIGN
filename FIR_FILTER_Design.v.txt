module fir_filter #(
    parameter DATA_WIDTH = 16, // Width of input and output data
    parameter COEFF_WIDTH = 16, // Width of filter coefficients
    parameter NUM_TAPS = 4 // Number of taps in the FIR filter
) (
    input wire clk,
    input wire rst,
    input wire [DATA_WIDTH-1:0] x_in, // Input sample
    output reg [DATA_WIDTH+COEFF_WIDTH-1:0] y_out // Filtered output
);

    // Filter coefficients (can be parameterized or hardcoded)
    reg [COEFF_WIDTH-1:0] coeff [0:NUM_TAPS-1];

    // Delay line for input samples
    reg [DATA_WIDTH-1:0] shift_reg [0:NUM_TAPS-1];

    // Accumulator for the filter output
    reg [DATA_WIDTH+COEFF_WIDTH-1:0] acc;

    integer i;

    initial begin
        // Example coefficients (can be changed based on filter design)
        coeff[0] = 16'h0A00; // Example coefficient 1
        coeff[1] = 16'h0B00; // Example coefficient 2
        coeff[2] = 16'h0C00; // Example coefficient 3
        coeff[3] = 16'h0D00; // Example coefficient 4
    end

    // FIR filter implementation
    always @(posedge clk or posedge rst) begin
        if (rst) begin
            // Reset the delay line and accumulator
            for (i = 0; i < NUM_TAPS; i = i + 1) begin
                shift_reg[i] <= 0;
            end
            acc <= 0;
            y_out <= 0;
        end else begin
            // Shift the delay line
            for (i = NUM_TAPS-1; i > 0; i = i - 1) begin
                shift_reg[i] <= shift_reg[i-1];
            end
            shift_reg[0] <= x_in;

            // Compute the FIR filter output
            acc = 0;
            for (i = 0; i < NUM_TAPS; i = i + 1) begin
                acc = acc + shift_reg[i] * coeff[i];
            end

            y_out <= acc; // Update output
        end
    end

endmodule
